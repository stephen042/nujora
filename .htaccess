# Disable default directory index behavior
DirectoryIndex disabled

# Enable mod_rewrite
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # If request is NOT an actual file or folder
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # Prevent infinite loops
    RewriteCond %{REQUEST_URI} !^/404\.php$

    # Force redirect to 404.php with a visible URL change
    RewriteRule ^.*$ /404.php [R=404,L]
</IfModule>

# Ensure Apache returns a proper 404 header
ErrorDocument 404 /404.php
